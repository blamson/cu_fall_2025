---
title: "test"
format: html
---

"Insect Species Occurrence Data from Multiple Projects Worldwide with Focus on Bees and Wasps in North America"

[Link](https://www.gbif.org/dataset/f519367d-6b9d-411c-b319-99424741e7de)

```{r}
library(readr)
library(dplyr)
```

```{r}
# path <- "data/0029162-251009101135966.csv"
path <- "full_bee_dataset.csv"
df <- readr::read_delim(path, delim="\t")
```

```{r}
df
```

Initial filtering steps: Filter down to - USA or CO - Just the bee families

Do some initial grouping on years, months for stuff - wanna figure out if its feasible to compare clustering of bees in colorado in 2000, 2010, 2020 and examine what those differences mean.

# Identifying the Bees

Tons of insect families in this dataset. Only so many are actually bees.

```{r}
df %>%
    group_by(family) %>%
    count() %>%
    arrange(desc(n), )
```

Below table taken from the Taxonomic scope section of the docs.

| Family Name | Examples |
|------------------------------------|------------------------------------|
| Andrenidae | andrenid bees, andrenids |
| Apidae | bumble bees, euglossine, euglossines, honey bees, stingless bees |
| Colletidae | colletid bees, plasterer bees, yellow-faced bees |
| Crabronidae | crabronid wasps, cicadakillers, sand wasps, mud daubers |
| Halictidae | halictid bees, sweat bees |
| Megachilidae | leafcutting bees |
| Melittidae | melittid bees, melittids |
| Sphecidae | mud daubers, sphecid wasps, digger wasps, sand wasps |

```{r}
bee_families <- c("Andrenidae", "Apidae", "Colletidae", "Halictidae", "Megachilidae", "Melittidae")
bee_df <- df %>% filter(family %in% bee_families)
```

```{r}
bee_df %>%
    group_by(family) %>%
    count() %>%
    arrange(desc(n), )
```

# Filter for location

Defining our study area is tough, what does the colorado subset of data look like. 

```{r}
AMERICA_bees <- bee_df %>% filter(countryCode == "US")
co_bees <- bee_df %>% filter(stateProvince == "Colorado")
```

```{r}
co_bees %>% filter(locality == "Rocky Mountain N.P.")
```

```{r}
co_bees %>% group_by(locality) %>% count() %>% arrange(desc(n))
```

# What does each row represent? What can I even conclude from this data?

# Relevant papers made using this data

[Spatial patterns of bee captures in North American bowl trapping surveys](https://resjournals.onlinelibrary.wiley.com/doi/10.1111/j.1752-4598.2009.00074.x)